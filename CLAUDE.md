# Bloom Scroll - CLAUDE.md

> **From Doom Scrolling to Bloom Scrolling**

## Overview

**Status**: ðŸŸ¡ Experimental / Research Phase  
**Purpose**: Perspective-driven content aggregator optimizing for serendipity over engagement  
**License**: MPL 2.0  
**Philosophy**: The "Slow Web" - finite feeds, raw data, epistemic progress

Bloom Scroll counters infinite scrolling by providing **finite, intentional feeds** that leave users feeling informed and optimistic. Core principle: **"The End" is the product.**

---

## Quick Start

```bash
cd bloom-scroll

# Backend (FastAPI)
cd backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --reload --port 5200

# Frontend (Flutter - if available)
cd frontend
flutter pub get
flutter run -d chrome
```

---

## The "Slow Web" Philosophy

### 1. Finite Feeds (20-Item Daily Limit)
- Hard cap of **20 cards per day**
- Completion celebrated with "The Garden is Watered" message
- No "Load More" escape hatch
- Daily reset encourages routine

### 2. Upward Scrolling (Reverse Chronology)
- Users "plant" seeds at the bottom
- Scroll **up** to see ideas bloom
- Newest content appears at bottom (like chat)
- Natural stopping point at top

### 3. Raw Data Over Cooked Media
- Render charts from source CSV/JSON
- Interactive visualizations with fl_chart
- Preserve data provenance and context
- "Show your work" transparency

### 4. Serendipity Over Similarity
- Penalize echo chambers (cosine distance 0.3-0.8)
- Prioritize blindspot perspectives
- Mix aesthetics + data + science
- "Robin Hood" visual rhythm

---

## Project Structure

```
bloom-scroll/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py           # FastAPI application
â”‚   â”‚   â”œâ”€â”€ models/           # Pydantic models
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ aggregator.py # Content aggregation
â”‚   â”‚   â”‚   â”œâ”€â”€ embeddings.py # Sentence-BERT embeddings
â”‚   â”‚   â”‚   â””â”€â”€ curation.py   # Serendipity algorithm
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â””â”€â”€ routes.py     # API endpoints
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ tests/
â”œâ”€â”€ frontend/                  # Flutter app (if present)
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â””â”€â”€ services/
â”‚   â””â”€â”€ pubspec.yaml
â””â”€â”€ README.md
```

---

## Development Commands

### Backend (FastAPI)
```bash
cd backend

# Setup
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# Run
uvicorn app.main:app --reload --port 5200

# Tests
pytest
pytest --cov=app tests/
```

### Frontend (Flutter)
```bash
cd frontend

flutter pub get       # Install dependencies
flutter run -d chrome # Run in browser
flutter build web     # Production build
flutter test          # Run tests
```

---

## Tech Stack

### Backend
- **FastAPI** (Python 3.11+) - Async REST API
- **PostgreSQL 15+** with **pgvector** - Vector similarity search
- **Sentence-BERT** (all-MiniLM-L6-v2) - 384-dim embeddings
- **Redis** - Caching and rate limiting

### Frontend
- **Flutter 3.0+** - Cross-platform UI
- **fl_chart** - Interactive data visualization
- **Riverpod** - State management

---

## Port Allocation

| Service | Port | Description |
|---------|------|-------------|
| API | 5200 | FastAPI backend |
| Web | 5201 | Flutter web app |
| PostgreSQL | 5432 | Database |
| Redis | 6379 | Cache |

---

## Content Sources

Bloom Scroll aggregates from diverse, high-signal sources:

### Statistical Truth
- Our World in Data
- FRED Economic Data
- UN Data
- World Bank Open Data

### Frontier Science
- arXiv (cs, physics, biology)
- PubMed
- bioRxiv/medRxiv

### Visual Culture
- Behance
- Dribbble
- Museums (Met, Rijks)

### Constructive News
- Positive News
- Solutions Journalism Network
- Good News Network

---

## Serendipity Algorithm

### Diversity Optimization
```python
# Penalize similarity, reward diversity
for candidate in candidates:
    distances = [cosine_distance(candidate, selected) for selected in feed]
    if min(distances) < 0.3:  # Too similar
        penalty += 0.5
    if 0.3 <= min(distances) <= 0.8:  # Sweet spot
        bonus += 0.3
```

### Content Type Rhythm
```python
# "Robin Hood" pattern - mix content types
rhythm = ["data", "science", "visual", "news", "data", ...]
for i, slot in enumerate(daily_slots):
    preferred_type = rhythm[i % len(rhythm)]
    candidates = filter_by_type(candidates, preferred_type)
```

### Blindspot Detection
```python
# Track user's perspective gaps
user_embedding_centroid = mean(user_interactions)
for candidate in candidates:
    if cosine_distance(candidate, user_embedding_centroid) > 0.7:
        # This is a blindspot - boost it
        candidate.score *= 1.5
```

---

## API Endpoints

```
# Feed
GET  /api/v1/feed              # Today's 20 items
GET  /api/v1/feed/archive      # Past feeds
POST /api/v1/feed/complete     # Mark feed complete

# Interactions
POST /api/v1/items/:id/view    # Track view
POST /api/v1/items/:id/save    # Save for later
POST /api/v1/items/:id/hide    # Hide from future

# User
GET  /api/v1/user/blindspots   # Perspective gaps
GET  /api/v1/user/stats        # Engagement stats
```

---

## Environment Variables

```bash
# Database
DATABASE_URL=postgresql://bloom:bloom@localhost:5432/bloom_scroll

# Redis
REDIS_URL=redis://localhost:6379

# Embeddings
EMBEDDING_MODEL=all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384

# Feed Configuration
DAILY_FEED_LIMIT=20
DIVERSITY_THRESHOLD=0.3
SERENDIPITY_FACTOR=0.5
```

---

## Design Principles

### UI/UX
- **Completion Widget**: Celebrate finishing ("The Garden is Watered")
- **Progress Indicator**: "12/20 seeds planted"
- **No Infinite Scroll**: Definitive end to each session
- **Upward Flow**: New content at bottom, completion at top

### Visual Aesthetic
- Nature-inspired color palette
- Calm, focused typography
- Generous whitespace
- Minimal chrome/distractions

### Data Visualization
- Interactive charts (not static images)
- Source attribution always visible
- Drill-down to raw data
- Mobile-friendly touch interactions

---

## Testing

```bash
# Backend
cd backend
pytest
pytest --cov=app --cov-report=html

# Frontend
cd frontend
flutter test
flutter test --coverage
```

---

## Related Projects

| Project | Relationship |
|---------|--------------|
| **Fortuna** | Problem intelligence (complementary signals) |
| **ForgeSight** | Data infrastructure patterns |
| **Dhanam** | ESG scoring methodology |

---

## Research Goals

- [ ] Measure impact on user wellbeing vs traditional feeds
- [ ] Optimize diversity without sacrificing relevance
- [ ] Test finite feed hypothesis at scale
- [ ] Develop "epistemic nutrition" metrics

---

*Bloom Scroll - The Slow Web | 20 Items. Then Stop.*
